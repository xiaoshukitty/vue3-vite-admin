import{g as e}from"./time-b0f5d1b0.js";import{u as a,_ as l}from"./index-71a4f72c.js";import{d as t,r as u,k as s,j as i,f as n,ai as o,c as v,a as c,I as r,u as d,J as p,U as m,T as h,S as y,O as g,F as b,a8 as f,R as j,az as k,aA as w,o as x}from"./@vue-e00fec0c.js";import"./element-plus-98e240ff.js";import"./lodash-es-e58ab31e.js";import"./@vueuse-4436a003.js";import"./@element-plus-e9c266ce.js";import"./@popperjs-b696b006.js";import"./@ctrl-91de2ec7.js";import"./dayjs-db284eda.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-96c4c0ad.js";import"./vue-router-e9849064.js";import"./pinia-0f9e5c3f.js";import"./vue-i18n-45dee299.js";import"./@intlify-e89ab06e.js";import"./nprogress-53f8e7ed.js";import"./js-cookie-8253c38e.js";import"./axios-7b293c88.js";const C=e=>(k("data-v-6d0ee119"),e=e(),w(),e),_={class:"video-player"},R=["src","loop"],E={class:"controls"},T={class:"btn-left"},I={class:"player-time"},L={class:"player-ptime"},M={class:"player-dtime"},U={class:"btn-right"},P={style:{position:"relative"}},S={class:""},V={class:"play-btn"},B=C((()=>c("span",null,"速度",-1))),q={class:"setting-toggle"},z={class:"setting-item"},F=C((()=>c("span",null,"洗脑循环",-1))),O={class:"setting-toggle"},A=["onClick"],W={class:"progress-box"},X=l(t({__name:"index",props:{videoSrc:{type:String,required:!0}},setup(l){const t=a(),k=u(null),w=u(!1),C=u(0),X=u(0),H=u(100),J=u(1),$=[.5,.75,"正常",1.25,1.5,2],D=u(!1),G=u(!1),K=u(!1),N=u(!1),Q=u(!1),Y=u(0),Z=u("1.25rem"),ee=u("1.25rem"),ae=u(!1),le=u(!1),te=u(!1),ue=s((()=>X.value>0?C.value/X.value*100+"%":"0%")),se=s((()=>Q.value?Y.value/X.value*100+"%":"0")),ie=s((()=>e(Y.value)));i((()=>{k.value&&(k.value.onloadedmetadata=()=>{var e;X.value=(null==(e=k.value)?void 0:e.duration)||0},k.value.volume=Math.round(H.value/100),k.value.playbackRate=J.value)})),n(C,(e=>{k.value&&Math.abs(k.value.currentTime-e)>.1&&(k.value.currentTime=e)}));const ne=()=>{k.value&&(ae.value=!ae.value,le.value=!1,N.value=!1)},oe=()=>{k.value&&(ae.value=!0,le.value=!le.value)},ve=()=>{k.value&&(w.value?k.value.pause():k.value.play(),w.value=!w.value)},ce=()=>{k.value&&(C.value=k.value.currentTime)},re=e=>{if(!k.value)return;const a=e.currentTarget,l=a.getBoundingClientRect(),t=e.clientX-l.left,u=Math.min(Math.max(t/a.clientWidth,0),1);C.value=u*X.value,k.value.currentTime=C.value},de=()=>{Q.value=!1},pe=e=>{if(!k.value)return;const a=e.currentTarget,l=a.getBoundingClientRect(),t=e.clientX-l.left,u=Math.min(Math.max(t/a.clientWidth,0),1);Y.value=u*X.value,Q.value=!0},me=()=>{D.value||(w.value=!1,C.value=0)},he=()=>{k.value&&(N.value=!N.value,ae.value&&(ae.value=!1),le.value=!1)},ye=()=>{k.value&&(k.value.volume=H.value/100,0==H.value?te.value=!0:te.value=!1)},ge=async()=>{if(k.value)try{K.value?await document.exitPictureInPicture():await k.value.requestPictureInPicture()}catch(e){}},be=()=>{K.value=null!==document.pictureInPictureElement};document.addEventListener("enterpictureinpicture",be),document.addEventListener("leavepictureinpicture",be);const fe=()=>{var e,a,l;const t=null==(e=k.value)?void 0:e.parentElement;t&&(G.value?null==(l=document.exitFullscreen)||l.call(document):null==(a=t.requestFullscreen)||a.call(t),G.value=!G.value)};return document.addEventListener("fullscreenchange",(()=>{G.value=!!document.fullscreenElement})),(a,u)=>{const s=o("SvgIcon"),i=o("el-slider"),n=o("ArrowRight"),J=o("el-icon"),G=o("el-switch");return x(),v("div",_,[c("video",{ref_key:"videoPlayer",ref:k,src:l.videoSrc,onTimeupdate:ce,onEnded:me,loop:D.value,onClick:ve,class:r(["video-element","dark"===d(t).theme?"video-theme":""]),style:p({height:K.value?"":"100%"})},null,46,R),c("div",E,[c("div",T,[c("button",{class:"play-btn",onClick:ve},[m(s,{class:"play-btn-icon",name:w.value?"play-pause":"play-back",width:Z.value,height:ee.value},null,8,["name","width","height"])]),c("span",I,[c("span",L,h(d(e)(C.value)),1),y("/ "),c("span",M,h(d(e)(X.value)),1)])]),c("div",U,[c("div",P,[c("button",{class:"play-btn",onClick:he},[m(s,{class:"play-btn-icon",name:te.value?"sound-off":"audio",width:Z.value,height:ee.value},null,8,["name","width","height"])]),c("div",{class:r(["audio-box",N.value?"active-audio":""])},[m(i,{modelValue:H.value,"onUpdate:modelValue":u[0]||(u[0]=e=>H.value=e),vertical:"",height:"100px",onInput:ye},null,8,["modelValue"])],2)]),c("div",S,[c("button",V,[m(s,{onClick:ne,class:"play-btn-icon",name:"setting",width:Z.value,height:ee.value},null,8,["width","height"])]),c("div",{class:r(["setting-box",ae.value?"active-setting":"",le.value?"active-speed-box":""])},[c("div",{class:r(["setting-panel",le.value?" active-speed":""])},[c("div",{class:"setting-item",onClick:oe},[B,c("div",q,[m(J,{style:{color:"#fff"}},{default:g((()=>[m(n)])),_:1})])]),c("div",z,[F,c("div",O,[m(G,{modelValue:D.value,"onUpdate:modelValue":u[1]||(u[1]=e=>D.value=e)},null,8,["modelValue"])])])],2),c("div",{class:"setting-speed",style:p({display:le.value?"block":"none"})},[(x(),v(b,null,f($,((e,a)=>c("div",{class:"setting-speed-item",key:a,onClick:a=>(e=>{k.value&&(k.value.playbackRate="正常"==e?1:e,le.value=!1,ae.value=!1)})(e)},[c("span",null,h(e),1)],8,A))),64))],4)],2)]),c("div",null,[c("button",{onClick:ge,class:"play-btn"},[m(s,{class:"play-btn-icon",name:"picture-in-picture",width:Z.value,height:ee.value},null,8,["width","height"])])]),c("div",null,[c("button",{onClick:fe,class:"play-btn"},[m(s,{class:"play-btn-icon",name:"full-screen",width:Z.value,height:ee.value},null,8,["width","height"])])])]),c("div",W,[c("div",{class:"progress-container",onClick:re,onMousemove:pe,onMouseleave:de},[c("div",{class:"progress-bar",style:p({width:ue.value})},null,4),Q.value?(x(),v("div",{key:0,class:"progress-thumb",style:p({left:se.value})},h(ie.value),5)):j("",!0)],32)])])])}}}),[["__scopeId","data-v-6d0ee119"]]),H=""+new URL("dance-351321f4.mp4",import.meta.url).href,J=(e,a)=>{const l=document.createElement("a");l.href=e,l.download=a,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l)},$={class:"video-btn"},D={class:"mt-30"},G=l(t({__name:"index",setup(e){const l=a(),t=()=>{(async(e,a)=>{try{const l=await fetch(e);if(!l.ok)throw new Error(`视频文件获取失败: ${l.statusText}`);const t=await l.arrayBuffer(),u=new Blob([t],{type:"video/mp4"}),s=URL.createObjectURL(u);J(s,a),URL.revokeObjectURL(s)}catch(l){l instanceof Error&&l.message}})(H,"downloadTest")};return(e,a)=>{const u=o("el-button");return x(),v("div",{class:r(["videoPlayback","dark"===d(l).theme?"video-theme":""])},[m(X,{videoSrc:d(H)},null,8,["videoSrc"]),c("div",$,[c("div",null,[m(u,{type:"primary",onClick:a[0]||(a[0]=e=>t())},{default:g((()=>[y("下载")])),_:1})]),c("div",D,[m(u,{type:"primary"},{default:g((()=>[y("随机视频")])),_:1})])])],2)}}}),[["__scopeId","data-v-c228576e"]]);export{G as default};
