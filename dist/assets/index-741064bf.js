import{u as e,b as l}from"./vue-router-519119dd.js";import{a}from"./time-1f223f1a.js";import{u as o,_ as s,d as t,G as i,S as n,h as r}from"./index-270361fe.js";import{d as u,b as c,j as d,A as m,ai as p,o as v,c as f,a as g,J as h,U as y,O as b,M as k,Q as _,I as j,T as w,u as x,Z as E,D as V,F as L,a8 as M,S as z,az as $,aA as I}from"./@vue-7d1b35cf.js";import{b as S}from"./element-plus-e2d1136e.js";import"./pinia-3624b2fa.js";import"./vue-i18n-9d70433a.js";import"./@intlify-e89ab06e.js";import"./nprogress-6f80ecd0.js";import"./dayjs-d97fcf3a.js";import"./js-cookie-8253c38e.js";import"./axios-7b293c88.js";import"./@element-plus-cdeb115f.js";import"./lodash-es-e58ab31e.js";import"./@vueuse-63aee19d.js";import"./@popperjs-b696b006.js";import"./@ctrl-91de2ec7.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-96c4c0ad.js";const N={class:"slider-container"},T=s(u({__name:"SliderVerification",setup(e,{expose:l}){const a=c(0),s=c(null),t=c(!1);let i=!1,n=0,r=0,u=o();d((()=>{s.value&&(r=s.value.offsetWidth-41)}));const E=e=>{t.value||(i=!0,n=e.clientX,document.addEventListener("mousemove",V),document.addEventListener("mouseup",L))},V=e=>{if(!i)return;const l=e.clientX-n;a.value=Math.min(Math.max(0,l),r)},L=()=>{i&&(i=!1,document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",L),a.value>=r?t.value=!0:a.value=0)};return l({verified:t}),m((()=>{document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",L)})),(e,l)=>{const o=p("el-icon");return v(),f("div",N,[g("div",{class:j(["slider-track","dark"===x(u).theme?"slider-theme":""]),ref_key:"track",ref:s},[g("div",{class:"slider-handle",style:h({left:a.value+"px"}),onMousedown:E},[y(o,{style:{color:"#32363999"}},{default:b((()=>[(v(),k(_(t.value?"Check":"DArrowRight")))])),_:1})],36),g("div",{class:j(["slider-progress",t.value?"verified-color":""]),style:h({width:a.value+"px"})},w(t.value?e.$t("common.Verify"):""),7),g("div",null,[g("span",null,w(e.$t("common.SliderVerified")),1)])],2)])}}}),[["__scopeId","data-v-db1bcbdb"]]),U={class:"direction"},C={class:"popover-icon"},H=["onClick"],R=s(u({__name:"Direction",emits:["emitIcon"],setup(e,{emit:l}){let a=c("Notebook"),o=c(!1);const s=l,t=E([{icon:"Memo",name:"居左"},{icon:"Tickets",name:"居中"},{icon:"Notebook",name:"居右"}]);return(e,l)=>{const i=p("el-button"),n=p("el-popover");return v(),f("div",U,[y(n,{placement:"bottom",width:100,trigger:"click",visible:x(o)},{reference:b((()=>[y(i,{class:"c-p",size:"small",icon:x(a),circle:"",onClick:l[0]||(l[0]=e=>V(o)?o.value=!0:o=!0)},null,8,["icon"])])),default:b((()=>[g("div",C,[(v(!0),f(L,null,M(t,((e,l)=>(v(),f("div",{key:l,onClick:l=>(e=>{let{icon:l,name:t}=e;a.value=l,o.value=!1,s("emitIcon",l)})(e),class:j(x(a)==e.icon?"paint":"")},[y(i,{class:"c-p",size:"small",icon:e.icon,circle:""},null,8,["icon"]),z(" "+w(e.name),1)],10,H)))),128))])])),_:1},8,["visible"])])}}}),[["__scopeId","data-v-2511f3a6"]]),A=e=>($("data-v-457e44ec"),e=e(),I(),e),D={class:j(["login"])},F={class:"d-flex ai-center p-a top-16 right-16 btn-top"},P={class:"login-box"},O=[A((()=>g("div",{class:"login-block2"},"1",-1)))],W={class:"login-right d-flex j-center pt-64"},X={class:"login-block"},q={class:"text-tips fs-14"},B={class:"sign-in d-flex j-between"},G={class:"other-login d-flex j-between ai-center"},J=A((()=>g("div",{class:"other-line"},null,-1))),Q=A((()=>g("div",{class:"other-line"},null,-1))),Z=[A((()=>g("div",{class:"login-block2"},"1",-1)))],K=s(u({__name:"index",setup(s){let u=c(!1),d=c(!1),m=c(!1),_=c("Notebook"),$=c(),I=E({authority:"Super",username:"admin",password:"123456"}),N=e(),U=l(),C=o();const H=t(),A=c(),K={username:[{trigger:"change",validator:(e,l,a)=>{l.length>=5?a():a(new Error("账号长度至少五位"))}}],password:[{trigger:"change",validator:(e,l,a)=>{l.length>=6?a():a(new Error("密码长度至少六位"))}}]};let Y=document.documentElement;"dark"==i("THEME")?(Y.className="dark",u.value=!0):(Y.className="",u.value=!1);const ee=()=>{u.value=!u.value,u.value?(Y.className="dark",C.theme="dark",n("THEME","dark")):(Y.className="",C.theme="light",n("THEME","light"))},le=e=>{_.value=e},ae=async()=>{if(await $.value.validate(),A.value.verified){m.value=!0;try{await H.userLogin({username:I.username,password:I.password,authority:I.authority}),setTimeout((()=>{m.value=!1;let e=N.query.redirect;U.push({path:e||"/overview"}),S({type:"success",message:"登录成功",title:`Hi,${a()}好`})}),1e3)}catch(e){S({type:"error",message:e.message})}}else S({type:"error",message:"请先拖动滑块验证"})};return(e,l)=>{const a=p("ThemeSwitch"),o=p("I18n"),s=p("el-option"),t=p("el-select"),i=p("el-form-item"),n=p("el-input"),c=p("el-checkbox"),E=p("el-button"),S=p("el-form");return v(),f("div",D,[g("div",F,[y(R,{onEmitIcon:le}),y(a,{MoveRound:x(u),"onUpdate:themeSwitch":ee},null,8,["MoveRound"]),y(o)]),g("div",P,[g("div",{class:j(["login-left","Memo"==x(_)?"center-left":""])},O,2),g("div",W,[g("div",X,[g("h2",{class:"mr-10 text-36",style:h(x(u)?"color:#fff":"")},w(e.$t("common.WelcomeBack")),5),g("div",q,w(e.$t("common.LoginIntroduce")),1),y(S,{class:"login-form",model:x(I),rules:K,ref_key:"loginForms",ref:$},{default:b((()=>[y(i,{prop:"authority"},{default:b((()=>[y(t,{modelValue:x(I).authority,"onUpdate:modelValue":l[0]||(l[0]=e=>x(I).authority=e),placeholder:"Select",style:{width:"100%"},size:"large"},{default:b((()=>[(v(!0),f(L,null,M(x(r),(e=>(v(),k(s,{key:e.value,label:e.label,value:e.label},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),y(i,{prop:"username"},{default:b((()=>[y(n,{"prefix-icon":e.User,modelValue:x(I).username,"onUpdate:modelValue":l[1]||(l[1]=e=>x(I).username=e),size:"large"},null,8,["prefix-icon","modelValue"])])),_:1}),y(i,{prop:"password"},{default:b((()=>[y(n,{type:"password","prefix-icon":e.Lock,modelValue:x(I).password,"onUpdate:modelValue":l[2]||(l[2]=e=>x(I).password=e),"show-password":"",size:"large"},null,8,["prefix-icon","modelValue"])])),_:1}),y(i,null,{default:b((()=>[y(T,{ref_key:"sliderVerification",ref:A},null,512)])),_:1}),y(i,{class:"login-select"},{default:b((()=>[y(c,{modelValue:x(d),"onUpdate:modelValue":l[3]||(l[3]=e=>V(d)?d.value=e:d=e),label:e.$t("common.RememberMe"),size:"large"},null,8,["modelValue","label"]),g("div",null,w(e.$t("common.ForgotPassword")),1)])),_:1}),y(i,null,{default:b((()=>[y(E,{class:"login_btn",type:"primary",onClick:ae,loading:x(m),size:"default"},{default:b((()=>[z(w(e.$t("common.Login")),1)])),_:1},8,["loading"])])),_:1}),y(i,null,{default:b((()=>[g("div",B,[y(E,{plain:"",size:"default",style:{width:"47%"}},{default:b((()=>[z(w(e.$t("common.PhoneLogin")),1)])),_:1}),y(E,{plain:"",size:"default",style:{width:"47%"}},{default:b((()=>[z(w(e.$t("common.ScanPayLogin")),1)])),_:1})])])),_:1}),y(i,null,{default:b((()=>[g("div",G,[J,g("div",null,w(e.$t("common.OtherLogin")),1),Q])])),_:1})])),_:1},8,["model"])])]),g("div",{class:"login-left",style:h({display:"Memo"==x(_)?"block":"none"})},Z,4)])])}}}),[["__scopeId","data-v-457e44ec"]]);export{K as default};
