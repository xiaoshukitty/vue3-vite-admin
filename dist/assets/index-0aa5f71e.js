import{g as e}from"./time-1f223f1a.js";import{d as l,b as a,k as t,j as u,e as s,ai as i,c as n,a as v,J as o,U as c,T as r,u as d,S as p,I as m,O as h,F as g,a8 as y,R as b,az as f,aA as j,o as k}from"./@vue-7d1b35cf.js";import{_ as w}from"./index-3b5a06ae.js";import"./element-plus-e2d1136e.js";import"./lodash-es-e58ab31e.js";import"./@vueuse-63aee19d.js";import"./@element-plus-cdeb115f.js";import"./@popperjs-b696b006.js";import"./@ctrl-91de2ec7.js";import"./dayjs-d97fcf3a.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-96c4c0ad.js";import"./vue-router-519119dd.js";import"./pinia-3624b2fa.js";import"./vue-i18n-9d70433a.js";import"./@intlify-e89ab06e.js";import"./nprogress-6f80ecd0.js";import"./js-cookie-8253c38e.js";import"./axios-7b293c88.js";const x=e=>(f("data-v-34f97e57"),e=e(),j(),e),C={class:"video-player"},M=["src","loop"],_={class:"controls"},T={class:"btn-left"},E={class:"player-time"},I={class:"player-ptime"},P={class:"player-dtime"},R={class:"btn-right"},S={style:{position:"relative"}},V={class:""},L={class:"play-btn"},U=x((()=>v("span",null,"速度",-1))),q={class:"setting-toggle"},z={class:"setting-item"},F=x((()=>v("span",null,"洗脑循环",-1))),A={class:"setting-toggle"},B=["onClick"],W={class:"progress-box"},X=w(l({__name:"index",props:{videoSrc:{type:String,required:!0}},setup(l){const f=a(null),j=a(!1),w=a(0),x=a(0),X=a(100),J=a(1),O=[.5,.75,"正常",1.25,1.5,2],D=a(!1),G=a(!1),H=a(!1),K=a(!1),N=a(!1),Q=a(0),Y=a("1.25rem"),Z=a("1.25rem"),$=a(!1),ee=a(!1),le=a(!1),ae=t((()=>x.value>0?w.value/x.value*100+"%":"0%")),te=t((()=>N.value?Q.value/x.value*100+"%":"0")),ue=t((()=>e(Q.value)));u((()=>{f.value&&(f.value.onloadedmetadata=()=>{var e;x.value=(null==(e=f.value)?void 0:e.duration)||0},f.value.volume=Math.round(X.value/100),f.value.playbackRate=J.value)})),s(w,(e=>{f.value&&Math.abs(f.value.currentTime-e)>.1&&(f.value.currentTime=e)}));const se=()=>{f.value&&($.value=!$.value,ee.value=!1,K.value=!1)},ie=()=>{f.value&&($.value=!0,ee.value=!ee.value)},ne=()=>{f.value&&(j.value?f.value.pause():f.value.play(),j.value=!j.value)},ve=()=>{f.value&&(w.value=f.value.currentTime)},oe=e=>{if(!f.value)return;const l=e.currentTarget,a=l.getBoundingClientRect(),t=e.clientX-a.left,u=Math.min(Math.max(t/l.clientWidth,0),1);w.value=u*x.value,f.value.currentTime=w.value},ce=()=>{N.value=!1},re=e=>{if(!f.value)return;const l=e.currentTarget,a=l.getBoundingClientRect(),t=e.clientX-a.left,u=Math.min(Math.max(t/l.clientWidth,0),1);Q.value=u*x.value,N.value=!0},de=()=>{D.value||(j.value=!1,w.value=0)},pe=()=>{f.value&&(K.value=!K.value,$.value&&($.value=!1),ee.value=!1)},me=()=>{f.value&&(f.value.volume=Math.round(X.value/100),0==X.value?le.value=!0:le.value=!1)},he=async()=>{if(f.value)try{H.value?await document.exitPictureInPicture():await f.value.requestPictureInPicture()}catch(e){}},ge=()=>{H.value=null!==document.pictureInPictureElement};document.addEventListener("enterpictureinpicture",ge),document.addEventListener("leavepictureinpicture",ge);const ye=()=>{var e,l,a;const t=null==(e=f.value)?void 0:e.parentElement;t&&(G.value?null==(a=document.exitFullscreen)||a.call(document):null==(l=t.requestFullscreen)||l.call(t),G.value=!G.value)};return document.addEventListener("fullscreenchange",(()=>{G.value=!!document.fullscreenElement})),(a,t)=>{const u=i("SvgIcon"),s=i("el-slider"),J=i("ArrowRight"),G=i("el-icon"),Q=i("el-switch");return k(),n("div",C,[v("video",{ref_key:"videoPlayer",ref:f,src:l.videoSrc,onTimeupdate:ve,onEnded:de,loop:D.value,onClick:ne,class:"video-element",style:o({height:H.value?"":"100%"})},null,44,M),v("div",_,[v("div",T,[v("button",{class:"play-btn",onClick:ne},[c(u,{class:"play-btn-icon",name:j.value?"play-pause":"play-back",width:Y.value,height:Z.value},null,8,["name","width","height"])]),v("span",E,[v("span",I,r(d(e)(w.value)),1),p("/ "),v("span",P,r(d(e)(x.value)),1)])]),v("div",R,[v("div",S,[v("button",{class:"play-btn",onClick:pe},[c(u,{class:"play-btn-icon",name:le.value?"sound-off":"audio",width:Y.value,height:Z.value},null,8,["name","width","height"])]),v("div",{class:m(["audio-box",K.value?"active-audio":""])},[c(s,{modelValue:X.value,"onUpdate:modelValue":t[0]||(t[0]=e=>X.value=e),vertical:"",height:"100px",onInput:me},null,8,["modelValue"])],2)]),v("div",V,[v("button",L,[c(u,{onClick:se,class:"play-btn-icon",name:"setting",width:Y.value,height:Z.value},null,8,["width","height"])]),v("div",{class:m(["setting-box",$.value?"active-setting":"",ee.value?"active-speed-box":""])},[v("div",{class:m(["setting-panel",ee.value?" active-speed":""])},[v("div",{class:"setting-item",onClick:ie},[U,v("div",q,[c(G,{style:{color:"#fff"}},{default:h((()=>[c(J)])),_:1})])]),v("div",z,[F,v("div",A,[c(Q,{modelValue:D.value,"onUpdate:modelValue":t[1]||(t[1]=e=>D.value=e)},null,8,["modelValue"])])])],2),v("div",{class:"setting-speed",style:o({display:ee.value?"block":"none"})},[(k(),n(g,null,y(O,((e,l)=>v("div",{class:"setting-speed-item",key:l,onClick:l=>(e=>{f.value&&(f.value.playbackRate="正常"==e?1:e,ee.value=!1,$.value=!1)})(e)},[v("span",null,r(e),1)],8,B))),64))],4)],2)]),v("div",null,[v("button",{onClick:he,class:"play-btn"},[c(u,{class:"play-btn-icon",name:"picture-in-picture",width:Y.value,height:Z.value},null,8,["width","height"])])]),v("div",null,[v("button",{onClick:ye,class:"play-btn"},[c(u,{class:"play-btn-icon",name:"full-screen",width:Y.value,height:Z.value},null,8,["width","height"])])])]),v("div",W,[v("div",{class:"progress-container",onClick:oe,onMousemove:re,onMouseleave:ce},[v("div",{class:"progress-bar",style:o({width:ae.value})},null,4),N.value?(k(),n("div",{key:0,class:"progress-thumb",style:o({left:te.value})},r(ue.value),5)):b("",!0)],32)])])])}}}),[["__scopeId","data-v-34f97e57"]]),J=""+new URL("dance-351321f4.mp4",import.meta.url).href,O={class:"videoPlayback"},D=v("h1",null,"视频播放",-1),G=l({__name:"index",setup:e=>(e,l)=>(k(),n("div",O,[D,c(X,{videoSrc:d(J)},null,8,["videoSrc"])]))});export{G as default};
