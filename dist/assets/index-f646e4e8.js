import{l as p,O as h,d as C,r as T,c as K,b as g,t as v,a as f,j as r,w as n,o as L,E as l}from"./index-96bdff00.js";const i=S=>{const{storageKey:t,storageValue:u,storageType:c}=S,s=p(u);try{const e=c==="session"?sessionStorage.getItem(t):localStorage.getItem(t);e!==null&&(s.value=JSON.parse(e))}catch(e){console.error("Error loading storage item: ",e)}return h(()=>{if(c==="session"){if(s.value!==void 0)return sessionStorage.setItem(t,JSON.stringify(s.value))}else if(s.value!==void 0)return localStorage.setItem(t,JSON.stringify(s.value))}),{value:s,removeStorage:()=>{try{c==="session"?sessionStorage.removeItem(t):localStorage.removeItem(t)}catch(e){console.error("Error removing storage item: ",e)}},updateStorage:e=>{s.value=e;try{c==="session"?sessionStorage.setItem(t,JSON.stringify(e)):localStorage.setItem(t,JSON.stringify(e))}catch(y){console.error("Error setting storage item: ",y)}}}},x=g("h1",null,"储存hook",-1),I=g("div",{style:{height:"6.25rem"}},null,-1),O=C({__name:"index",setup(S){let t=p(""),u=p("");const c=()=>{i({storageKey:"token",storageValue:"123456789",storageType:"session"})},s=()=>{const{value:o}=i({storageKey:"token",storageType:"session"});t.value=o.value},m=()=>{const{updateStorage:o}=i({storageKey:"token",storageType:"session"});o("tokentoken")},d=()=>{const{removeStorage:o}=i({storageKey:"token",storageType:"session"});o()},e=()=>{i({storageKey:"name",storageValue:"xiaoxiaoshu",storageType:"local"})},y=()=>{const{value:o}=i({storageKey:"name",storageType:"local"});u.value=o.value},_=()=>{const{updateStorage:o}=i({storageKey:"name",storageType:"local"});o("xiaohuan")},k=()=>{const{removeStorage:o}=i({storageKey:"name",storageType:"local"});o()};return(o,N)=>{const a=T("el-button");return L(),K("div",null,[x,g("div",null,[g("h2",null,"储存Session："+v(f(t)),1),r(a,{type:"primary",onClick:c},{default:n(()=>[l("储存session")]),_:1}),r(a,{type:"primary",onClick:s},{default:n(()=>[l("获取session")]),_:1}),r(a,{type:"primary",onClick:m},{default:n(()=>[l("更新session")]),_:1}),r(a,{type:"primary",onClick:d},{default:n(()=>[l("删除session")]),_:1})]),I,g("div",null,[g("h2",null,"储存Local："+v(f(u)),1),r(a,{type:"primary",onClick:e},{default:n(()=>[l("储存Local")]),_:1}),r(a,{type:"primary",onClick:y},{default:n(()=>[l("获取Local")]),_:1}),r(a,{type:"primary",onClick:_},{default:n(()=>[l("更新Local")]),_:1}),r(a,{type:"primary",onClick:k},{default:n(()=>[l("删除Local")]),_:1})])])}}});export{O as default};
